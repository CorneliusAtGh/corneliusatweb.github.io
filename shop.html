<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/index.css">
    <link rel="shortcut icon" href="assets/images/logo.webp" type="image/x-icon">
    <title>Shop • domain.com</title>
</head>
<body>
    <div class="navigation native">
        <div class="container">
            <div class="col25">
                <button><a href="https://domain.com/">domain.com</a></button>
            </div>
            <div class="col75 right">
                <button><a href="projects">Projects</a></button>
                <button><a href="about-me">About Me</a></button>
                <button><a href="blog">Blog</a></button>
                <button><a href="downloads">Downloads</a></button>
                <button class="active-button"><a href="shop">Shop</a></button>
                <button><a href="contact-me">Contact Me</a></button>
            </div>
        </div>
    </div>
    <div class="navigation resp">
        <div class="container">
            <div class="col50">
                <button><a href="https://domain.com/">domain.com</a></button>
            </div>
            <div class="col50 right">
                <button id="menu-button"><img src="assets/images/menu.svg" class="icon"></button>
            </div>
        </div>
    </div>
    <div class="menu" id="menu">
        <button><a href="projects">Projects</a></button>
        <button><a href="about-me">About Me</a></button>
        <button><a href="blog">Blog</a></button>
        <button><a href="downloads">Downloads</a></button>
        <button class="active-button"><a href="shop">Shop</a></button>
        <button><a href="contact-me">Contact Me</a></button>
    </div>
    <div class="body">
        <div class="container">
            <h1>Shop</h1>
            <br>
            <input type="text" placeholder="Search For Stuff..." id="search-bar">
            <div class="horizontal-slider">
                <button class="tab-link" onclick="openTab(event, 'all')" id="default-tab">Shop All</button>
                <button class="tab-link" onclick="openTab(event, 'games')">Games</button>
                <button class="tab-link" onclick="openTab(event, 'ebooks')">eBooks</button>
                <button class="tab-link" onclick="openTab(event, 'other')">Other Stuff</button>
            </div>
            <br>
            <div class="tab-content" id="all">
                <h3>Shop All</h3>
                <br>
                <p class="item-counter">Item(s): </p>
                <br>
                <div class="col100">
                    <div class="col25">
                        <div class="shop-card-container item">
                            <a href="shop/id/h9uiyYEkI6/">
                                <img src="shop/id/h9uiyYEkI6/img/battlefield_bg.png" class="shop-card-image">
                                <div class="shop-card-content">
                                    <div class="col50">
                                        <p class="item-title"><b>1863</b></p>
                                    </div>
                                    <div class="col50 right">
                                        <p>€5<sup>99</sup></p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="col25">
                        <div class="shop-card-container item">
                            <a href="shop/id/S7QubDZU2x/">
                                <img src="shop/id/S7QubDZU2x/img/Battle of Hatchie's Bridge.png" class="shop-card-image">
                                <div class="shop-card-content">
                                    <div class="col50">
                                        <p class="item-title"><b>Book</b></p>
                                    </div>
                                    <div class="col50 right">
                                        <p>€7<sup>99</sup> (*)</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-content" id="games">
                <h3>Games</h3>
                <br>
                <p class="item-counter">Item(s): </p>
                <br>
                <div class="col100">
                    <div class="col25">
                        <div class="shop-card-container item">
                            <a href="shop/id/h9uiyYEkI6/">
                                <img src="shop/id/h9uiyYEkI6/img/battlefield_bg.png" class="shop-card-image">
                                <div class="shop-card-content">
                                    <div class="col50">
                                        <p class="item-title"><b>1863</b></p>
                                    </div>
                                    <div class="col50 right">
                                        <p>€5<sup>99</sup></p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-content" id="ebooks">
                <h3>eBooks</h3>
                <br>
                <p class="item-counter">Item(s): </p>
                <br>
                <div class="col100">
                    <div class="col25">
                        <div class="shop-card-container item">
                            <a href="shop/id/S7QubDZU2x/">
                                <img src="shop/id/S7QubDZU2x/img/Battle of Hatchie's Bridge.png" class="shop-card-image">
                                <div class="shop-card-content">
                                    <div class="col50">
                                        <p class="item-title"><b>Book</b></p>
                                    </div>
                                    <div class="col50 right">
                                        <p>€7<sup>99</sup> (*)</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-content" id="other">
                <h3>Other Stuff</h3>
                <br>
                <p class="item-counter">Item(s): </p>
                <br>
                <div class="card">
                    <h5 class="warning">Nothing to shop for here yet!</h5>
                </div>
                <br>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="container">
            <div class="col50">
                <p>&copy; <span id="copyright-year"></span> <a href="https://domain.com/" target="_blank">domain.com</a></p>
            </div>
            <div class="col50 right">
                <p><a href="legal-stuff">Legal Stuff</a> • <a href="kudos">Kudos</a></p>
            </div>
        </div>
    </div>

    <script src="assets/js/index.js"></script>
</body>
</html>

<script>
    // Search Bar & Tabs

    const searchBar = document.getElementById('search-bar');

    function applySearch() {
        const searchTerm = searchBar.value.toLowerCase();
        const visibleTabContent = Array.from(document.querySelectorAll('.tab-content'))
            .find(content => content.style.display === 'block');
        
        if (!visibleTabContent) return;

        const existingNoResults = visibleTabContent.querySelector('.no-results-message');
        if (existingNoResults) {
            existingNoResults.remove();
        }

        const items = visibleTabContent.querySelectorAll('.item');
        let visibleCount = 0;
        
        items.forEach(item => {
            const itemTitle = item.querySelector('.item-title');
            
            if (itemTitle) {
                const titleText = itemTitle.textContent.toLowerCase();
                
                if (titleText.includes(searchTerm)) {
                    item.style.display = '';
                    visibleCount++;
                }
                else {
                    item.style.display = 'none';
                }
            }
        });

        const counter = visibleTabContent.querySelector('.item-counter');
        if (counter) {
            counter.textContent = `Item(s): ${visibleCount}`;
        }

        if (visibleCount === 0 && searchTerm.trim() !== '') {
            const noResultsDiv = document.createElement('div');
            noResultsDiv.className = 'card no-results-message';
            noResultsDiv.innerHTML = '<h5 class="warning">No results for your current input... ¯\\_( ͡° ͜ʖ ͡°)_/¯</h5>';
            visibleTabContent.appendChild(noResultsDiv);
        }
    }

    function updateAllCounters() {
        document.querySelectorAll('.tab-content').forEach(tabContent => {
            const items = tabContent.querySelectorAll('.item');
            const counter = tabContent.querySelector('.item-counter');
            if (counter) {
                counter.textContent = `Item(s): ${items.length}`;
            }
        });
    }

    searchBar.addEventListener('input', applySearch);

    function openTab(evt, tabName) {
        document.querySelectorAll('.tab-content').forEach(content => {
            content.style.display = 'none';
        });
        document.querySelectorAll('.tab-link').forEach(link => {
            link.classList.remove('active-button');
        });
        document.getElementById(tabName).style.display = 'block';
        evt.currentTarget.classList.add('active-button');
        applySearch();
    }

    document.getElementById("default-tab").click();
    updateAllCounters();
</script>